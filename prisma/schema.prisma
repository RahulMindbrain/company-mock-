datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Company {
  id              Int       @id @default(autoincrement())
  
  companyName     String?
  websiteUrl      String?
  printName       String?
  billPrefix      String?          

  beginningDate   DateTime?
  commencingFrom  DateTime?

  addressLine1    String?
  addressLine2    String?

  country         String?
  state           String?

  contactNo1      String?
  contactNo2      String?

  email           String? @unique
  website         String?

  gstNo           String?
  panNo           String?
  vatNo           String?
  fax             String?

  lightLogo       String?        
  darkLogo        String?     

  plans           Plan[]
  admins          Admin[] 

  createdBy  String?
  updatedBy  String?

  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@index([companyName])
  @@index([email])
  @@index([gstNo])
}


model Plan{
  id Int  @id @default(autoincrement())
  companyId        Int? 
  company          Company?  @relation(fields: [companyId], references: [id])
  name             String?
  price            Float?
  BV               Float?
  description      Json?
  isActive         Boolean?
  tax              String?
  config           String?

  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Admin {
  id                       Int         @id @default(autoincrement())
  companyId                Int?
  company                  Company?    @relation(fields: [companyId], references: [id])
  
  firstname                String?
  lastname                 String?
  email                    String?     @unique
  mobno1                   String?
  mobno2                   String?
  profileimg               String?
  admintype                String?

  walletbalance            Float       @default(0)
  totalwalletadd           Float       @default(0)
  totalwithdraw            Float       @default(0)
  totaltransferwallet      Float       @default(0)

  status                   Boolean     @default(true)

  createdBy                String?
  updatedBy                String?

  createdAt                DateTime    @default(now())
  updatedAt                DateTime    @updatedAt

  @@index([companyId])
  @@index([status])
  @@index([admintype])
}
